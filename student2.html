<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Student Submission</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
<style>
body { font-family: 'Roboto', sans-serif; background:#f5f7fa; margin:0; padding:0; display:flex; justify-content:center; align-items:center; height:100vh; }
.container { background:white; padding:40px; border-radius:12px; box-shadow:0 6px 16px rgba(0,0,0,0.1); width:340px; text-align:center; }
h1 { color:#333; margin-bottom:20px; }
input, select { width:100%; padding:10px; margin:8px 0; border-radius:6px; border:1px solid #ccc; font-size:1em; }
button { width:100%; padding:10px; background:#4a90e2; border:none; border-radius:6px; color:white; font-size:1em; font-weight:500; cursor:pointer; transition:0.3s; }
button:hover { background:#357ab8; }
#message { margin-top:15px; font-weight:500; }
</style>
</head>
<body>
<div class="container">
  <h1>Submit Score</h1>
  <input type="text" id="studentID" placeholder="Student ID">
  <select id="unitSelect">
    <option value="">Select Unit</option>
    <option value="Unit1">Unit 1</option>
    <option value="Unit2">Unit 2</option>
    <option value="Unit3">Unit 3A</option>
    <option value="Unit4">Unit 3B</option>
    <option value="Unit5">Unit 4A</option>
    <option value="Unit6">Unit 4B</option>
    <option value="Unit1">Unit 5A</option>
    <option value="Unit2">Unit 5B</option>
    <option value="Unit3">Unit 6</option>
    <option value="Unit4">Unit 8</option>
    <option value="Unit5">Unit 7A</option>
    <option value="Unit6">Unit 7B</option>
    
  </select>
  <select id="hwSelect">
    <option value="">Select Homework</option>
    <option value="HW1">Homework 1</option>
    <option value="HW2">Homework 2</option>
    <option value="HW3">Homework 3</option>
    <option value="HW1">Homework 4</option>
    <option value="HW2">Homework 5</option>
    <option value="HW3">Homework 6</option>
  </select>
  <input type="number" id="score" placeholder="Score">
  <button onclick="submitScore()">Submit</button>
  <div id="message"></div>
</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzi91G6Jyt6bqovelepmOnbGEM6BYpFFEozhdVMr6aXGTAHPn6z85rzrYFRm5l-Vq4E/exec"; // Replace with deployed Apps Script URL

async function submitScore(){
  const id = document.getElementById("studentID").value.trim();
  const score = document.getElementById("score").value.trim();
  const unit = document.getElementById("unitSelect").value;
  const hw = document.getElementById("hwSelect").value;
  const message = document.getElementById("message");

  if(!id || !score || !unit || !hw){
    message.textContent = "Please complete all fields.";
    message.style.color = "red";
    return;
  }

  message.textContent = "Submitting...";
  message.style.color = "#333";

  try{
    const res = await fetch(SCRIPT_URL, {
      method: "POST",
      body: JSON.stringify({
        action: "submitGrade",
        studentID: id,
        score: score,
        unit: unit,
        hw: hw
      })
    });
    const data = await res.json();
    if(data.success){
      let count = 3;
      message.textContent = `Success! (${count})`;
      message.style.color = "green";
      const interval = setInterval(()=>{
        count--;
        if(count === 0){
          message.textContent = "";
          clearInterval(interval);
        } else {
          message.textContent = `Success! (${count})`;
        }
      },1000);
    } else {
      message.textContent = data.message || "Invalid ID.";
      message.style.color = "red";
    }
  } catch(err){
    message.textContent = "Error submitting score.";
    message.style.color = "red";
  }
}
</script>
</body>
</html>
